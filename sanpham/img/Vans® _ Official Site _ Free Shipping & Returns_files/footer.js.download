define(["jquery","cms.signupform","foundation.dropdown","handlebars-core","shared.main.screen"],function(e,n,o,t,i){function a(e,n){this.element=$(e),this.options=n,this.data={},this.metadata=$(this.element).data("footer-options")}var r="footer";a.prototype={defaults:{columnContent:".column-content",columnHeader:".footer_col .heading",regionSelector:".footer-localize",regionSelectorButton:"#footer-region-button",regionSelectorDropdown:"#footer-region-dropdown",template:"html.cms.region-selector-list"},init:function(){console.log("Initializing footer component."),this.config=$.extend({},this.defaults,this.options,this.metadata);var e=this;return e.$footerContent=$(e.element).find(".footer-content > div"),e.$columnContent=e.$footerContent.find(e.config.columnContent),e.$columnHeaders=e.$footerContent.find(e.config.columnHeader),e.$regionSelector=$(this.element).find(e.config.regionSelector),e.$regionSelectorButton=e.$regionSelector.find(e.config.regionSelectorButton),e.$regionSelectorDropdown=e.$regionSelector.find(e.config.regionSelectorDropdown),e._build(),e._events(),$(this.element).find("form.signup").signupForm(),0<e.$regionSelectorButton.length&&e._loadRegionSelector(),e},_build:function(){var e=this;"small"===i.size()?(e._collapseAllMenus(),e.bindMobileEvents()):(e._expandAllMenus(),e.unbindMobileEvents())},_events:function(){var o=this;$.pubsub("subscribe","window.resize.breakpoint",function(e,n){o._build()});var n=$("#footerLinkModal");o.$columnContent.find("a[data-open][data-modal-size]").on("click",function(){var e=$(this).data("modalSize");n.attr("class","reveal "+e)})},unbindMobileEvents:function(){this.$footerContent.off("click keydown")},bindMobileEvents:function(e){var a=this;a.$footerContent.on("click",function(){var e=$(this),n=e.find(a.config.columnHeader),o=e.find(a.config.columnContent),t=e.hasClass("collapsed");"small"===i.size()&&(t?(e.removeClass("collapsed"),o.removeClass("hide").attr({"aria-hidden":"false"}),n.attr({"aria-expanded":"true"})):(e.addClass("collapsed"),o.addClass("hide").attr({"aria-hidden":"true"}),n.attr({"aria-expanded":"false"})))}),a.toggleKeyboardMenuEvents(a.$footerContent)},toggleKeyboardMenuEvents:function(e){var n=this;e.off("keydown",n,n.keydownHandler),"small"===i.size()&&e.on("keydown",n,n.keydownHandler)},keydownHandler:function(e){var n=$(this),o=$(e.target),t=n.find(".heading"),a=n.find("a"),i=40,r=13,l=27,s=32,d=38;switch(e.keyCode){case s:case r:o.hasClass("heading")&&n.click();break;case i:if(o.hasClass("heading")&&(e.preventDefault(),a.first().focus()),o.is("a")){e.preventDefault();var c=o.parent().next().find("a");c.length||(c=a.first()),c.focus()}break;case d:if(o.is("a")){e.preventDefault();var f=o.parent().prev().find("a");f.length||(f=a.last()),f.focus()}break;case l:n.hasClass("collapsed")||t.click().focus()}},_expandAllMenus:function(){var e=this;e.$footerContent.removeClass("collapsed"),e.$columnContent.removeClass("hide").attr({"aria-hidden":"false"}),e.$columnHeaders.attr({"aria-expanded":"true","aria-haspopup":"false",role:null,tabindex:"-1"})},_collapseAllMenus:function(){var e=this;e.$footerContent.addClass("collapsed"),e.$columnContent.addClass("hide").attr({"aria-hidden":"true"}),e.$columnHeaders.attr({"aria-expanded":"false","aria-haspopup":"true",role:"button",tabindex:"0"})},_loadRegionSelector:function(){var n=this;n.data=n.$regionSelectorButton.data("regions"),n.$regionSelectorButton.one("click",function(e){n.loadAndCompileTemplate().done(function(){n._renderRegionSelector()})})},_renderRegionSelector:function(){var e=this;e.$regionSelectorDropdown.html(e.compiledTemplate(e.data)),new Foundation.Dropdown(e.$regionSelectorDropdown),e.$regionSelectorDropdown.foundation("open")}},a.prototype=$.extend({},t,a.prototype),a.defaults=a.prototype.defaults,$.fn.footer=function(n){return this.each(function(){var e=$(this).data(r);e||(e=new a(this,n).init(),$(this).data(r,e))})}});
//# sourceMappingURL=../../maps/js/cms/footer.hash-6835c37362b4a8b75b70a953cbd32006.js.map