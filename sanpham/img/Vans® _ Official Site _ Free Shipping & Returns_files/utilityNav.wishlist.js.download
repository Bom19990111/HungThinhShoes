define(["jquery","wcs.context","pubsub"],function(i,t,e){var n;return(n={defaults:{el:".topnav-utility .wishlist, .topnav-util-js .nav-wishlist-qty-js",dataAttr:"wishlist-options",replaceString:"{count}",replaceElement:'<span class="qty"/>',classHasProducts:"has-products",quantitySelector:".qty"},init:function(){var e=this;return e.deferred=i.Deferred(),e.$element=i(e.defaults.el),e.metadata=e.$element.data(e.defaults.dataAttr),e.config=i.extend({},e.defaults,e.metadata),e.$element.hasClass("nav-wishlist-qty-js")&&(e.config.quantitySelector=".nav-wishlist-qty-js",e.config.replaceElement='<span class="nav-wishlist-qty-js"/>',e.config.replaceString=""),e.events(),e.deferred.resolve(),e.update()},events:function(){var n=this;i.pubsub("subscribe","WISHLIST_UPDATED",function(e,t){n.update()})},update:function(){return this.updateDisplay(this.getCount())},getCount:function(){var e=Number(t.getWishList().quantity);return isNaN(e)?0:e},createQtyElement:function(){var n=this,a=i(n.config.replaceElement);return n.$element.html(function(e,t){return t.replace(n.config.replaceString,a.get(0).outerHTML)}),a=i(n.config.quantitySelector,n.$element)},replaceAttributes:function(){var a=this,r=[];return a.$element.children().each(function(e,n){i.each(n.attributes,function(e,t){"class"!==t.name&&-1<t.value.indexOf(a.config.replaceString)&&(t.value=t.value.replace(a.config.replaceString,a.getCount()),r.push({currentCount:a.getCount(),$element:i(n),attrib:t.name}))})}),r},updateDisplay:function(n){var e=this,t=i(e.config.quantitySelector,e.$element);return e.config.replaceAttrs&&0!==e.config.replaceAttrs.length?e.config.replaceAttrs&&0<e.config.replaceAttrs.length&&i.each(e.config.replaceAttrs,function(e,t){t.$element.attr(t.attrib,t.$element.attr(t.attrib).replace(t.currentCount,n))}):e.config.replaceAttrs=e.replaceAttributes(),t.length<=0&&(t=e.createQtyElement()),t.text(n),0<n?e.$element.addClass(e.config.classHasProducts):e.$element.removeClass(e.config.classHasProducts),e.config.replaced=!0,e.$element.removeClass("hide"),e}}).init(),n});
//# sourceMappingURL=../../../maps/js/cms/nav/utilityNav.wishlist.hash-d1690a3557f629b2a914089e1f495362.js.map