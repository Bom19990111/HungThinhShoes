define(["jquery","pubsub","wcs.context"],function(l,t,a){function n(t,e){this.element=t,this.options=e,this.tabs=l("[data-tabcontent-id]",t),this.defaults={panelWidth:l(t).width(),panelDuration:500,contentDuration:325,overlayDelay:90,minHeight:639},this.metadata=l(this.element).data("right-panels-options")}var i="rightPanels";n.defaults=(n.prototype={defaults:{},init:function(){console.log("Initializing right sidebar panels for",l(this.element));var t=this;return t.config=l.extend({},t.defaults,t.options,t.metadata),t._build(),t.events(),t.updateTabCount("wishlist"),t.updateTabCount("shopcart"),t},_build:function(){},events:function(){var a=this;l("#global-body-overlay").on("click",function(){l(".global-cart-wishlist-panels-js .tags .active-js").trigger("click")}),l("[data-tabcontent-id]",a.element).on("click",function(t){t.preventDefault(),a.togglePanels(l(t.currentTarget).data("tabcontent-id"),t);var e=0<l(".active[data-tabcontent-id]").length;l.pubsub("publish","mini-cart-visibility-change",{isOpen:e})}),l(".global-cart-wishlist-panels-js > .content").on("click",".mini-cart-icon-close-js",function(t){l(".global-cart-wishlist-panels-js .tags .active-js").trigger("click")}),l.pubsub("subscribe","WISHLIST_UPDATED",function(t,e){a.updateTabCount("wishlist")}),l.pubsub("subscribe","SHOPCART_UPDATED",function(t,e){a.updateTabCount("shopcart")})},updateTabCount:function(t){var e=this.getTab(t),a=this.getTabCount(t);l(".mini-cart-tag-qty",e).text(a)},getTabCount:function(t){var e;switch(t){case"wishlist":e=Number(a.getWishList().quantity);break;case"shopcart":e=Number(a.getShoppingCart().quantity);break;default:e=0}return e=isNaN(e)?0:e},getTab:function(t){return l('[data-tabcontent-id="'+t+'"]',this.element)},getTabPanel:function(t){return l('[data-tabcontent="'+t+'"]',this.element)},togglePanels:function(t,e){var a=this,n=!1;return n=a.currentTab?a.currentTab===t?(t=null,a.animatePanelContents(t,e),a.animatePanels("close"),!1):(a.animatePanelContents(t,e),!0):window.innerHeight>a.config.minHeight?(a.animatePanelContents(t,e),a.animatePanels("open"),!0):(t=null,!1),a.setActivePanel(t),a.setAccessibilityState(),n},setActivePanel:function(t){var e=this;l(".active[data-tabcontent-id]",e.element).length;e.currentTab=t,l(e.tabs).removeClass("active active-js").addClass("inactive inactive-js"),e.getTab(e.currentTab).removeClass("inactive inactive-js").addClass("active active-js"),0<l(".active[data-tabcontent-id]",e.element).length||l(e.tabs).removeClass("inactive inactive-js")},animatePanels:function(t){var e=this,a="open"===t?e.config.panelWidth:0,n="open"===t?e.config.panelWidth:0,i="open"===t?"100%":"0%",s="open"===t?e.config.overlayDelay:0,o="open"===t?{width:"100%",height:"100%"}:{position:"relative",width:"auto",height:"auto"};l("body").stop(!0).css(o).animate({left:-1*a},e.config.panelDuration),l(".global-cart-wishlist-panels-js").stop(!0).animate({right:n},e.config.panelDuration),l("#global-body-overlay").stop(!0).delay(s).animate({width:i},e.config.panelDuration)},animatePanelContents:function(t,e){var a=this,n=a.getTabPanel(a.currentTab).stop(),i=a.getTabPanel(t).stop(),s=0<l(".active[data-tabcontent-id]",a.element).length,o=s?a.config.contentDuration:0;if(delay=s&&t===a.currentTab?0:a.config.panelDuration,n.css({zIndex:1}).delay(delay).animate({left:-a.config.panelWidth},o),i.css({left:a.config.panelWidth,zIndex:2}).delay(delay).animate({left:0},o),"shopcart"===t&&e&&e.originalEvent)try{window.dataLayer.push({event:"miniCartView",location:"right-panel"})}catch(t){console.error("Failed push to dataLayer",t)}},setAccessibilityState:function(){var t=this;l(t.tabs).attr("aria-selected","false"),l("[role='tabpanel']").attr("aria-hidden","true"),t.getTab(t.currentTab).attr("aria-selected","true"),t.getTabPanel(t.currentTab).attr("aria-hidden","false")}}).defaults,l.fn.rightPanels=function(e){return this.each(function(){var t=l(this).data(i);t||(t=new n(this,e).init(),l(this).data(i,t))})}});
//# sourceMappingURL=../../../maps/js/wcs/view/right-panel.hash-f07c3a2e7f698a928e71f2a1e6628e58.js.map