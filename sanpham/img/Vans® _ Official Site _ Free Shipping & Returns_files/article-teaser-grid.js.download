define(["jquery","wcs.alert","wcs.utils","foundation.equalizer"],function(s,n,o){function i(t,e){this.element=t,this.options=e,this.metadata=s(this.element).data("article-teaser-grid-options")}var a="articleTeaserGrid";i.defaults=(i.prototype={defaults:{start:0,pageSize:4,max:-1},init:function(){console.log("Intializing Article Teaser Grid component",this),this.config=s.extend({},this.defaults,this.options,this.metadata);var t=this;return t.container=s(".articles-wrapper",t.element),t.updateArticles(),t.button=s(".button.more",t.element),t.filters=s(".articleteaser-filters li",t.element),t.selectedFilter=t.filters.filter(".active"),t.isProcessing=!1,t._events(),t},_events:function(){var i=this;i.button.on("click",function(){if(!i.isProcessing)return i.isProcessing=!0,i.requestArticles(),!1}),i.filters.find("a").on("click",function(t){t.preventDefault();var e=s(this);i.setActiveFilter(e),i.emptyArticleGrid(),i.requestArticles()})},setActiveFilter:function(t){this.filters.removeClass("active"),this.selectedFilter=t.parent().addClass("active")},updateArticles:function(){this.articles=s(".article-teaser-wrapper",s(this.container)),this.preloadedSections=s(".cat-dynamic-grid.results.hide",s(this.container))},emptyArticleGrid:function(t){this.container.empty()},updateArticleGrid:function(t){var e=this;t&&s(t).appendTo(e.container),e.updateArticles(),e.config.start=e.articles.length,e.configureLoadMore(),t||Foundation.reInit(s("[data-equalizer]",e.element))},requestArticles:function(){var e=this;if(e.updateArticles(),n.showLoadingNotification(),this.preloadedSections.length){var t=e.preloadedSections.first();t.removeClass("hide"),t.find(".lazy-load").lazyload().removeClass("lazy-load"),e.updateArticleGrid(),e.isProcessing=!1,n.hideLoadingNotification()}else{var i={start:e.articles.length,size:this.config.pageSize};if(0<e.filters.length){var a=e.selectedFilter.find("a").attr("href");o.hasURLParam(a,"tag")&&(i.tag=o.getURLParam(a,"tag"))}var r=o.setMultipleURLParams(i,!1,this.config.url);s.ajax({url:r,processData:!0,success:function(t){e.updateArticleGrid(t),e.isProcessing=!1,n.hideLoadingNotification()},error:function(t){console.error("error loading articles",t),e.isProcessing=!1,n.hideLoadingNotification()}})}},configureLoadMore:function(){var t=this;t.config.max=s(".cat-dynamic-grid.results",t.container).last().data("results-count"),0<t.config.max&&t.articles.length>=t.config.max&&0==t.preloadedSections.length?t.button.hide():t.button.show()}}).defaults,s.fn.articleTeaserGrid=function(e){return this.each(function(){var t=s(this).data(a);t||(t=new i(this,e).init(),s(this).data(a,t))})}});
//# sourceMappingURL=../../maps/js/cms/article-teaser-grid.hash-a98f90b140e96c2d420b7228b9f92971.js.map